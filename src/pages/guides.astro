---
import Layout from '../layouts/Layout.astro';
import fs from 'node:fs';
import path from 'node:path';

// Get all guides
const guidesDir = path.join(process.cwd(), 'src/data/guides');
const guideFiles = fs.readdirSync(guidesDir).filter(f => f.endsWith('.json') && !f.startsWith('_'));

const guides = guideFiles.map(file => {
  const slug = file.replace('.json', '');
  const guide = JSON.parse(fs.readFileSync(path.join(guidesDir, file), 'utf-8'));
  return { slug, ...guide };
});

const difficultyColors = {
  'Easy': 'bg-emerald-100 text-emerald-700 border-emerald-200',
  'Medium': 'bg-amber-100 text-amber-700 border-amber-200',
  'Advanced': 'bg-red-100 text-red-700 border-red-200'
};

const costColors = {
  'Free': 'bg-emerald-100 text-emerald-700',
  'Freemium': 'bg-sky-100 text-sky-700',
  'Paid': 'bg-orange-100 text-orange-700'
};
---

<Layout title="Setup Guides | AI Automation for Home Services">
  <main class="max-w-6xl mx-auto px-6 py-12">
    
    <!-- Back Link -->
    <a href="/" class="inline-flex items-center text-paper-200/60 hover:text-cyan-400 mb-8 transition-colors">
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      Back to Home
    </a>

    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-extrabold mb-4 text-paper-100">
        Setup <span class="text-cyan-400">Guides</span>
      </h1>
      <p class="text-xl text-paper-200/70 max-w-2xl mx-auto">
        Step-by-step instructions so simple a 10-year-old could follow them.
        No jargon, no fluff — just exactly what to click.
      </p>
    </div>

    <!-- Guides Grid -->
    <div class="grid md:grid-cols-2 gap-6">
      {guides.map((guide) => (
        <a 
          href={`/guide/${guide.slug}`}
          class="paper-card p-6 hover:scale-[1.02] transition-all"
        >
          <div class="flex flex-wrap gap-2 mb-4">
            <span class={`text-xs px-2 py-1 rounded-full border ${difficultyColors[guide.difficulty]}`}>
              {guide.difficulty}
            </span>
            <span class={`text-xs px-2 py-1 rounded-full ${costColors[guide.costType]}`}>
              {guide.cost}
            </span>
            <span class="text-xs px-2 py-1 rounded-full bg-navy-100 text-navy-600">
              ⏱️ {guide.time}
            </span>
          </div>
          
          <h2 class="text-xl font-bold text-navy-900 mb-2">{guide.title}</h2>
          <p class="text-navy-600 mb-4">{guide.description}</p>
          
          <span class="text-cta-500 font-medium">
            Read guide →
          </span>
        </a>
      ))}
    </div>

    <!-- More Coming -->
    <div class="mt-12 text-center">
      <p class="text-paper-200/50">
        More guides added regularly. 
        <a href="mailto:alex@blueprintstudioco.com" class="text-cyan-400 hover:underline">
          Request a guide
        </a>
      </p>
    </div>

  </main>
</Layout>
